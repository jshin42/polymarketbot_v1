# =============================================================================
# Polymarket Anomaly Bot - Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your values
# NEVER commit .env to version control
# =============================================================================

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------
POSTGRES_USER=polymarket
POSTGRES_PASSWORD=your_secure_password_here
POSTGRES_DB=polymarketbot
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}

# -----------------------------------------------------------------------------
# Redis Configuration
# -----------------------------------------------------------------------------
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_URL=redis://${REDIS_HOST}:${REDIS_PORT}

# -----------------------------------------------------------------------------
# Polymarket API Configuration
# -----------------------------------------------------------------------------
# CLOB API Base URLs (do not change unless endpoints move)
POLYMARKET_CLOB_URL=https://clob.polymarket.com
POLYMARKET_WS_URL=wss://ws-subscriptions-clob.polymarket.com/ws/market
POLYMARKET_GAMMA_URL=https://gamma-api.polymarket.com

# L2 Authentication Credentials (required for live trading only)
# Obtain these after L1 wallet authentication with CLOB
POLYMARKET_API_KEY=
POLYMARKET_SECRET=
POLYMARKET_PASSPHRASE=
POLYMARKET_ADDRESS=

# Private key for signing (LIVE TRADING ONLY - keep secure!)
# Use a dedicated hot wallet with minimal funds
POLYMARKET_PRIVATE_KEY=

# -----------------------------------------------------------------------------
# Blockchain Data Providers
# -----------------------------------------------------------------------------
# Polygonscan API for wallet first-seen timestamps
POLYGONSCAN_API_KEY=

# Alchemy (optional backup provider)
ALCHEMY_API_KEY=
ALCHEMY_POLYGON_URL=

# -----------------------------------------------------------------------------
# Trading Mode Configuration
# -----------------------------------------------------------------------------
# Paper trading mode (default: true, MUST explicitly set false for live)
PAPER_MODE=true

# Live trading gate (default: false, requires PAPER_MODE=false to work)
ENABLE_LIVE_TRADING=false

# Paper trading initial bankroll (USD equivalent)
PAPER_INITIAL_BANKROLL=10000

# -----------------------------------------------------------------------------
# Data Collection Configuration
# -----------------------------------------------------------------------------
# Order book snapshot interval (milliseconds)
ORDERBOOK_SNAPSHOT_INTERVAL_MS=1000

# Trade polling interval (milliseconds)
TRADE_POLL_INTERVAL_MS=1000

# Data staleness threshold (milliseconds) - triggers NO_TRADE if exceeded
STALENESS_THRESHOLD_MS=10000

# Markets to track (comma-separated condition IDs, or "auto" for closing-soon)
TRACKED_MARKETS=auto

# Auto-tracking: markets closing within N hours
AUTO_TRACK_HOURS=24

# -----------------------------------------------------------------------------
# Feature Engineering Configuration
# -----------------------------------------------------------------------------
# Rolling window for baseline statistics (minutes)
ROLLING_WINDOW_MINUTES=60

# T-Digest compression parameter (higher = more accuracy, more memory)
TDIGEST_COMPRESSION=100

# Hawkes process parameters
HAWKES_ALPHA=0.5
HAWKES_BETA=0.1

# FOCuS change-point detection threshold
FOCUS_THRESHOLD=5.0

# Time ramp parameters (exponential ramp as close approaches)
TIME_RAMP_ALPHA=2.0
TIME_RAMP_BETA=0.1

# -----------------------------------------------------------------------------
# Scoring Thresholds
# -----------------------------------------------------------------------------
# Minimum anomaly score to consider trading
MIN_ANOMALY_SCORE=0.65

# Minimum execution score to consider trading
MIN_EXECUTION_SCORE=0.55

# -----------------------------------------------------------------------------
# Risk Management Configuration
# -----------------------------------------------------------------------------
# Maximum total exposure as percentage of bankroll
MAX_EXPOSURE_PCT=0.10

# Maximum single bet as percentage of bankroll
MAX_SINGLE_BET_PCT=0.02

# Maximum single position as percentage of bankroll
MAX_POSITION_PCT=0.05

# Maximum open positions
MAX_OPEN_POSITIONS=10

# Daily loss limit as percentage of bankroll (triggers circuit breaker)
DAILY_LOSS_LIMIT_PCT=0.05

# Maximum drawdown as percentage (triggers circuit breaker)
MAX_DRAWDOWN_PCT=0.15

# No-trade zone before market close (seconds)
NO_TRADE_ZONE_SECONDS=120

# Consecutive loss limit before circuit breaker
CONSECUTIVE_LOSS_LIMIT=5

# Circuit breaker cooldown (minutes)
CIRCUIT_BREAKER_COOLDOWN_MINUTES=60

# -----------------------------------------------------------------------------
# Strategy Configuration
# -----------------------------------------------------------------------------
# Kelly criterion fraction (0.25 = quarter-Kelly)
KELLY_FRACTION=0.25

# Minimum bet size (USD)
MIN_BET_SIZE_USD=5

# Maximum spread (basis points) to consider trading
MAX_SPREAD_BPS=500

# Minimum order book depth (USD) required
MIN_DEPTH_USD=100

# -----------------------------------------------------------------------------
# Alerting Configuration
# -----------------------------------------------------------------------------
# Discord webhook for alerts
DISCORD_WEBHOOK_URL=

# Telegram bot configuration
TELEGRAM_BOT_TOKEN=
TELEGRAM_CHAT_ID=

# Generic webhook for alerts
ALERT_WEBHOOK_URL=

# -----------------------------------------------------------------------------
# Logging Configuration
# -----------------------------------------------------------------------------
# Log level: trace, debug, info, warn, error, fatal
LOG_LEVEL=info

# Enable structured JSON logging
LOG_JSON=true

# Log file path (leave empty for stdout only)
LOG_FILE_PATH=

# -----------------------------------------------------------------------------
# Dashboard Configuration
# -----------------------------------------------------------------------------
# Dashboard API port
DASHBOARD_PORT=3000

# Dashboard API host
DASHBOARD_HOST=0.0.0.0

# CORS allowed origins (comma-separated)
CORS_ORIGINS=http://localhost:3000,http://localhost:5173

# -----------------------------------------------------------------------------
# Development / Testing
# -----------------------------------------------------------------------------
# Node environment
NODE_ENV=development

# Enable debug mode (verbose logging, additional checks)
DEBUG_MODE=false

# Test mode (uses mock data)
TEST_MODE=false
